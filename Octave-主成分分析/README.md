# -university-IT-experiment-2-
大学の情報工学実験２という講義で作ったプログラムをまとめてみました

# Octaveによる主成分分析 

# 課題１（Step-1）
　課題１ではsample2d.txt に対して主成分分析を適用し，最大固有値に対応する固有ベクトルを求め，図示するプログラムを作成する．図に示す直線はサンプル分布を楕円で表した時の長軸であり，傾きは固有ベクトルで決まり，かつサンプル平均を通る直線である．また，この固有ベクトルにサンプルを正射影して求まる z_i のサンプル分散を求める。
 
 
 # 課題２（Step-2）
　Step2 では直接サンプル分布を観察できない高次元サンプルに対して主成分分析を適用し，サンプル分布の概略を可視化してみる．具体的には，機械学習の分野で古くから用いられているiris flowerdataset に対して主成分分析を適用する．このデータセットは，3 種類の花のアヤメ(Iris setosa, versicolor,virginica) を各種50個体選び，それぞれの花のがく片の長さと幅，花弁の長さと幅を調べた結果からなるデータである．すなわち，サンプル総数は150，次元数は4 となるので直接サンプルの分布を観察することができない．
そこでStep2 では，主成分分析により4 次元空間上のサンプルを2 次元空間上に射影することで，元のサンプル分布が，おおよそではあるが，どのようになっているのかを観察できるようにしてみる．
　
 
 課題2では，iris4d.txtのデータを使用する．
このファイルをStep1 と同様に読み込んで，そのサイズを調べれば4 行150 列となっている．すなわち，各列がそれぞれの花を表し，各行が4 つの長さと幅の値となっている．また，3 種類の花の内訳は

・ 1 列から50 列目：setosa

・ 51 列目から100 列目：versicolor

・ 51 列目から100 列目：virginica

となっており，各行は

・	1 行目：がく片(sepal) の長さ

・ 2 行目：がく片の幅

・	3 行目：花弁(petal) の長さ

・ 4 行目：花弁の幅

となっている．
また分布の近似について調べるために累積寄与率も計算する

# 課題３（Step-3）
課題3では配布データのiris4d.txt に対して主成分分析を適用し，固有値の大きい上位r 本の固有ベクトルを用いて，<img src="https://latex.codecogs.com/svg.latex?\Large&space;\widetilde{x_i}" title="\widetilde{x_i}" /> を求める．その後，元のサンプル<img src="https://latex.codecogs.com/svg.latex?\Large&space;\widetilde{x_i}" title="\widetilde{x_i}" /> との2 乗誤差の平均を計算する．その結果で横軸をr，縦軸を<img src="https://latex.codecogs.com/svg.latex?\Large&space;{error}_r" title="{error}_r" />としたグラフ出力させる．


# 課題４
使用するデータは“glass.txt”というデータであり，そのデータを提出する際にレポートに添付する．データは（<https://www.kaggle.com/uciml/glass/downloads/glass-classification.zip/1 >，閲覧日：2019年6月10日）よりダウンロードしたデータである．本課題で使用するデータは，6つのガラスの種類のサンプルを214個分析した結果である．列は9つの元素となっている．データは各サンプルが含む元素の量を表している．ガラスの種類の内訳は，


・1　 行から70行目 ➡ Type1

・71  行から146行目 ➡ Type2

・147 行から163行目 ➡ Type3

・164 行から176行目 ➡ Type4

・177 行から185行目 ➡ Type5

・186 行から241行目 ➡ Type6
 
となっており，各列は
 
・1列目 ➡ RI: refractive index

・2列目 ➡ Na: Sodium

・3列目 ➡ Mg: Magnesium

・4列目 ➡ Al: Aluminum

・5列目 ➡ Si: Silicon

・6列目 ➡ K: Potassium

・7列目 ➡ Ca: Calcium

・8列目 ➡ Ba: Barium

・9列目 ➡ Fe: Iron
 
となっている．しかし，データは上を転置したものを使う．（つまりPCAする際は行と列を転置して分析を行う．）

本課題でも3つのSTEPでプログラムを作成する．そのSTEPを次に示す．

	STEP(1): 課題1の同様に主成分分析で固有値を求め，降順に並べた後に，対応する固有ベクトルも並べ替える．その結果から式（4）でZiを計算する．

	STEP(2): 散布図の出力

	STEP(3): 累積寄与率を計算する


# 課題５
固有顔とは， 主成分分析により求めた固有ベクトルのことである．固有ベクトルを計算する時に，以下のステップで計算を行うことにした．

・STEP(1):64x64の画像を読み込み，4096x1のベクトルにする．
（今回はサイズが64x64の16個の画像を使用するので，サイズが4096x16の行列 X を得る）

・STEP(2):行列 X の平均ベクトルを求める

・STEP(3):行列 X の共分散行列を求め，固有値と固有ベクトルを求める．

・STEP(4):固有値を降順に並べ替え，最大16の固有値に対応する16本の固有ベクトルを求める．

・STEP(5):求めた固有ベクトルの1本が 4096x1 のサイズであり，それを64x64サイズにreshapeして画像化する．

# おわりに
本レポートでは主成分分析を行うことによって，その方法や目的について学んだ．また，プログラム言語としてOctaveを使用した．これはOctaveで取り組んだ初めての課題となった．

課題1によって，主成分分析で2次元のサンプルを1次元の落とし，その傾向等について観察できるようになった．また課題2では，多次元で観察できないデータに対して，主成分分析を行うことによってデータを観察・分析・分類することができた．課題3では多次元のデータの次元数を少なくすることによって，ほぼ同じデータをもっと少ない記憶容量で保存することができた．

データ分析が重要視されている現代では，主成分分析を行って何か分析できることは，非常に大切な能力・知識だと考えられる．今度も，PCAに関する知識を増やすことを，そしてPCAを今度の研究・勉学に役に立てることを期待している．
